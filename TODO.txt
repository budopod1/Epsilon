TODO:
* remove the parent_assignments/initial_assignments system
* add for loops
