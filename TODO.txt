TODO:
* make extern_funcs use instrinsics whenever possible
* add compilation to machine code
